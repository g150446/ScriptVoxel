# 操作リファレンス

ScriptVoxel ブロックゲームのすべてのキーボードとマウス操作の完全ガイドです。

## クイックリファレンステーブル

| アクション | 主要キー | 代替キー | 備考 |
|----------|---------|---------|------|
| 前進 | W | Z, 上矢印 | 視線方向に歩く |
| 後退 | S | 下矢印 | 後ろに歩く |
| 左に移動 | A | Q, 左矢印 | 左にサイドステップ |
| 右に移動 | D | 右矢印 | 右にサイドステップ |
| ジャンプ | SPACE | - | 地上にいるときのみ |
| 視点操作 | マウス移動 | - | 一人称視点カメラ |
| ブロック配置 | 右マウスボタン | - | 選択したホットバーアイテム |
| ブロック削除 | 左マウスボタン | - | 破壊/除去 |
| ブロックピック | 中マウスボタン | - | ブロックをホットバーにコピー |
| ホットバー1-9選択 | 1-9数字キー | - | 即座に選択 |
| 次のホットバースロット | マウスホイール下 | - | 前方にサイクル |
| 前のホットバースロット | マウスホイール上 | - | 後方にサイクル |
| インベントリ開閉 | E | - | インベントリを切り替え |
| マウスカーソル解放 | ESC | - | フリーカーソルモード |
| Pythonエディタ | F4 | - | シングルプレイヤーのみ |
| 影の切り替え | L | - | デバッグ機能 |
| デバッグ情報出力 | I | - | コンソール出力 |

## 移動操作

### 基本移動

ゲームは、異なるキーボードレイアウトに対応する複数のキーオプションを備えた標準の一人称移動操作を使用しています。

**前進:**
- **W** - QWERTY標準レイアウト
- **Z** - AZERTYレイアウトサポート
- **上矢印** - 代替/アクセシビリティ

**後退:**
- **S** - 標準後退
- **下矢印** - 代替

**サイドステップ(横移動):**
- **A** - 左へサイドステップ(QWERTY)
- **Q** - 左へサイドステップ(AZERTY)
- **左矢印** - 代替左
- **D** - 右へサイドステップ(ユニバーサル)
- **右矢印** - 代替右

### 移動メカニクス

**速度**: 毎秒5.0ユニット
- すべての方向で一貫した移動速度
- ダッシュやしゃがみはありません(まだ)
- 前進、後退、サイドステップのいずれも速度は同じ

**斜め移動**:
- 前進/後退と左/右を組み合わせて斜め移動
- 例: W + D = 前方右斜め
- 移動ベクトルは自動的に正規化されます(速度の優位性なし)

### ジャンプ

**ジャンプキー:** **SPACE**

**ジャンプメカニクス:**
- **ジャンプ力**: 5.0ユニット(中程度の高さ)
- **地上にいるときのみジャンプ可能** - 空中ジャンプはできません
- ジャンプ中に方向キーを押し続けてその方向にジャンプ
- 重力が毎秒9.8ユニット²で引き下げます

**ジャンプの高さ:**
- 約1ブロックの高さをクリア可能
- ほとんどの妥当な高さから安全に着地
- ギャップを越えるにはジャンプ+前進を使用

### ステップクライミング

**自動機能:**
- ジャンプなしで**0.5ユニットまでの高さ**の段/ブロックを歩けます
- 階段を上るときのスムーズな移行
- 小さな障害物のためにジャンプする必要がありません

### 接地検出

ゲームは自動的に地上にいるかどうかを検出します:
- ブロック上に立っている = 接地(ジャンプ可能)
- 空中 = 非接地(ジャンプ不可)
- 着地したばかり = 接地(再びジャンプ可能)

## カメラ操作

### マウスルック(一人称)

**マウス移動:**
- マウスを**左/右**に動かす = 回転(ヨー)
- マウスを**上/下**に動かす = 上下を見る(ピッチ)

**感度:** 0.3(デフォルト)
- 必要に応じてコードで調整可能
- マウス移動でカメラがどれだけ速く回転するかに影響

**ピッチ制限:**
- **最大上**: 90度(真上)
- **最大下**: -90度(真下)
- カメラを上下逆さまにはできません

**カメラ位置:**
- プレイヤーの中心から0.702ユニット上に配置
- リアルな「目線レベル」の一人称視点を提供
- 目があると予想される場所に一致

### マウスキャプチャ

**自動キャプチャ:**
- ゲームウィンドウ内でクリックするとマウスがキャプチャされます
- カーソルが見えなくなります
- マウス移動がカメラを制御

**マウスの解放:**
- **ESC**を押してマウスキャプチャを解放
- カーソルが表示されます
- UI要素と相互作用できます
- マウス移動はカメラを制御しなくなります

**再キャプチャ:**
- ゲームウィンドウ内のどこかをクリック
- マウスが再び自動的にキャプチャされます

### デバッグカメラ操作(オプション)

**Ctrl + マウスホイール上:** カメラをズームイン(距離を減少)
**Ctrl + マウスホイール下:** カメラをズームアウト(距離を増加)

これらの操作はカメラ距離を調整し、主にデバッグや三人称視点用です。

## ブロックとの相互作用

### 相互作用範囲

**最大距離:** 10ブロック(10ユニット)
- この範囲内のブロックとのみ相互作用可能
- 有効なブロックを指すと十字線が表示されます
- 10ブロックを超えると相互作用できません

### マウスボタンアクション

**左クリック(左マウスボタン):**
- **アクション**: ブロックを削除/破壊
- **効果**: ブロックが即座に消えます
- **マルチプレイヤー**: 検証のためサーバーにRPCを送信

**右クリック(右マウスボタン):**
- **アクション**: 選択したブロックを配置
- **効果**: ターゲット位置にブロックを配置
- **注意**: ブロックは選択したホットバースロットから来ます
- **配置**: 指しているブロックの面上

**中クリック(中マウスボタン/マウスホイールクリック):**
- **アクション**: ブロックをピック
- **効果**: ブロックタイプをホットバーにコピー
- **動作**: ホットバー内の一致するブロックを自動選択
- **クイック使用**: 見ているブロックに素早く切り替える方法

### ブロック配置の詳細

**配置位置:**
- ブロックはターゲットブロックの**隣接面**に配置されます
- ブロックを指して、右クリックして隣に配置
- 既存のブロック内にブロックを配置することはできません

**回転:**
- 一部のブロックは視線方向に基づいて回転します
- **丸太**: 見ている軸に沿って整列(X/Y/Z)
- **階段**: 水平方向に見ている方向を向きます
- **標準ブロック**: 回転なし

### 十字線インジケーター

- **表示**: 範囲内のブロックを指しているとき
- **非表示**: 空のスペースを指しているときまたは範囲外
- **黒いワイヤーフレームキューブ**: ターゲットにしているブロックを表示

## ホットバーとインベントリ操作

### ホットバー選択

**数字キー(1-9):**
- **1**を押す = ホットバースロット1を選択
- **2**を押す = ホットバースロット2を選択
- ... **9**まで同様
- **即座に選択** - 最速の方法

**マウスホイール:**
- **下にスクロール** = 次のスロット(前方にサイクル)
- **上にスクロール** = 前のスロット(後方にサイクル)
- **ラップアラウンド** - スロット9の後、スロット1に戻ります

**視覚インジケーター:**
- 選択されたスロットには**フレーム/ボーダー**が表示されます
- 画面の下部に表示されます

### インベントリ管理

**Eキー:**
- **Eを押す** = インベントリウィンドウを開く
- **もう一度Eを押す**(またはESC) = 閉じる

**インベントリ内:**
- **クリックしてドラッグ** = スロット間でアイテムを移動
- **アイテムをクリック** = スタック全体をピックアップ
- **空のスロットをクリック** = アイテムを配置
- **別のアイテムをクリック** = アイテムを交換
- **ドラッグ中にESC** = ドラッグ操作をキャンセル

**インベントリ構造:**
- **ホットバー**: 9スロット(下部) - スロット0-8
- **バッグ**: 27スロット(9×3グリッド) - メインストレージ
- **合計**: 36スロット

## 特殊キーと機能

### Pythonエージェントエディタ(シングルプレイヤーのみ)

**F4キー:**
- Pythonコードエディタウィンドウを**切り替え**
- AIエージェントを制御するコードを書けます
- **シングルプレイヤーモードでのみ利用可能**
- エディタが開いている間、プレイヤー入力が無効になります

**エディタが開いているとき:**
- マウスが表示されます
- 移動操作が無効(W/A/S/Dが機能しません)
- 自由にコードを入力できます
- F4を再度押して閉じ、プレイを再開

### デバッグとユーティリティキー

**Lキー:** 影のレンダリングをオン/オフ
- パフォーマンステストに便利
- ビジュアル品質に影響

**Iキー:** デバッグ情報をコンソールに出力
- 現在位置を出力
- 前方向ベクトルを表示
- 開発者/テスト機能

**ESCキー:**
- マウスカーソルを解放
- インベントリを閉じる(開いている場合)
- 前のメニュー状態に戻る

**ウィンドウを閉じる/Alt+F4:**
- 終了前にワールドを自動保存
- いつでも安全に閉じられます

## 入力動作に関する注意事項

### キーボードレイアウトサポート

ゲームは複数のキーボードレイアウトをサポートしています:
- **QWERTY**: W/A/S/D
- **AZERTY**: Z/Q/S/D
- **矢印キー**: ユニバーサル代替

快適に感じる任意の組み合わせを使用できます。

### 入力優先順位

複数の入力が押されたとき:
- 移動入力が組み合わさります(斜め移動)
- 最新のホットバー選択が優先されます
- マウスルックは連続的で独立しています

### 入力無効状態

以下の場合、プレイヤー入力が無効になります:
- Pythonエディタが開いている(F4)
- インベントリウィンドウが開いている(UIインタラクション)
- マウスがキャプチャされていない(カーソル表示)

これらの状態では、ゲームプレイモードに戻るまで移動と相互作用操作は機能しません。

## コントローラーサポート

**現在サポートされていません:**
- ゲームパッド/コントローラー入力は実装されていません
- キーボードとマウスのみ

## アクセシビリティに関する注意事項

### 代替操作スキーム

- 移動用の複数のキーオプション(WASD, ZQSD, 矢印)
- マウスはいつでも解放可能(ESCキー)
- 必須の連打ボタンなし
- ステップクライミングがジャンプ要件を減らします

### 調整可能な設定

- マウス感度はコードで変更可能
- 現在ゲーム内設定メニューは利用不可

## 初心者向けのヒント

1. **移動の練習**: 数分間歩いてジャンプして慣れましょう
2. **マウスルックをマスター**: スムーズに周りを見る感覚をつかみましょう
3. **数字キーを使う**: ホットバー選択にはマウスホイールより速い
4. **中クリックが便利**: 見ているブロックに素早く切り替えられます
5. **ESCは味方**: 必要なときはいつでもマウスを解放できます

---

**次**: ブロックとゲームシステムについて学ぶには[ゲームプレイメカニクス](./03_gameplay.md)へ。
